# Examples of the R interface in action

These scripts demonstrate different capabilities of the Hypertrace R interface.

- [basic-workflow.R][./basic-workflow.R] demonstrates the workflow for a single vegetation spectrum simulated using PRO4SAIL.
- [snr-sensitivity.R][./snr-sensitivity.R] demonstrates a simple loop of the workflow over instrument SNR values of 1, 10, 100, and 200.
- [geometry.R][./geometry.R] demonstrates two passes through the workflow, one using the default sun-sensor geometry (sun and observer at nadir, azimuth of 0) and one with observer at 20 degrees off nadir. Note that LibRadtran LUT generation for off-nadir scenes takes roughly 10x longer than for nadir scenes (we are working on ways to optimize this).
- [above-endmember-analysis.R][./above-endmember-analysis.R] demonstrates the Hypertrace endmember analysis Shawn Serbin and Alexey Shiklomanov presented at an SBG meeting several months ago. The input reflectance object contains 25 spectra representing 5 different land cover classes (coastal water, interior water, vegetation, snow, bare rock) from an AVIRIS scene in Alaska. This script runs the Hypertrace workflow for these spectra over a factorial combination of 10 different atmospheres (defined in the [data/atmospheres.csv][./data/atmospheres.csv] file) and 5 different instrument noise configurations (from in the [data/noisefiles/][./data/noisefiles] directory).
- [existing-lut.R][./existing-lut.R] demonstrates use the workflow with existing MODTRAN look-up tables. Note that Isofit is _very_ picky about re-using LUTs --- for a given aerosol-water vapor combination (like AOD = 1.0, H2O = 1.5), Isofit will only skip LUT generation if it finds the following files in the LUT directory: `AOT550-1.000_H2OSTR-1.500.chn`, `AOT550-1.000_H2OSTR-1.500.tp6`, and `LUT_AOT550-1.000_H2OSTR-1.500.json` (see the [existing-modtran-lut/](./existing-modtran-lut) directory for an example). Moreover, you may have to match the wavelengths of the LUTs and the input for this to work properly (we are looking into this now).
